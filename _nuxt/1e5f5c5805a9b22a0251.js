(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{176:function(e,t,o){var content=o(181);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(35).default)("3e99b99a",content,!1,{sourceMap:!1})},177:function(e,t,o){"use strict";o(70);var r={data:function(){return{siteList:[],selectedSiteId:void 0}},mounted:function(){this.getSiteList()},created:function(){this.getSiteList()},methods:{getSiteList:function(){var e=this;this.$axios.get("main_app/site_list").then(function(t){console.log(t);for(var i=0;i<t.data.results.length;i++)e.siteList.push({text:t.data.results[i].domain,value:t.data.results[i].site_id});e.selectedSiteId=e.siteList[0].value}).catch(function(t){console.log(t),console.log(t.response),403==t.response.status&&(e.$store.commit("auth/setAuthError",!0),e.$store.commit("auth/setAuthErrorMessage",t.response.data.error_message),e.$router.push("/auth/login"))})}},watch:{selectedSiteId:function(e,t){this.$emit("updatedSelectedSiteId")}}},n=o(9),component=Object(n.a)(r,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-select",{attrs:{items:e.siteList,"menu-props":"auto",label:"Site Domain"},model:{value:e.selectedSiteId,callback:function(t){e.selectedSiteId=t},expression:"selectedSiteId"}})],1)},[],!1,null,null,null);t.a=component.exports},180:function(e,t,o){"use strict";var r=o(176);o.n(r).a},181:function(e,t,o){(e.exports=o(34)(!1)).push([e.i,".dropzone-custom-title{margin-top:0;color:#00b782}.subtitle{color:#314b5f}.download-a{color:#fff!important;text-decoration:none!important}",""])},182:function(e,t,o){"use strict";var r=o(183),n=o.n(r),l=(o(179),jQuery,{props:["pAcceptedFiles"],data:function(){return{uploadedFileUrls:{},hasError:!1,error:void 0}},components:{vueDropzone:n.a},methods:{sendingEvent:function(e,t,o){t.setRequestHeader("Authorization","Bearer ".concat(this.$store.state.auth.token))},reload:function(){var e=this;this.$axios.post("main_app/reload_convert_sku").then(function(t){console.log(t),delete e.uploadedFileUrls[file.upload.uuid]}).catch(function(e){console.log(e)})},uploadSucceed:function(e,t){console.log("uploaed success..."),console.log(e),console.log(t),this.uploadedFileUrls[e.upload.uuid]=t.url},fileUploadError:function(e,t,o){console.log(t),console.log(o),console.log(o.status),403==o.status?(this.$store.commit("auth/setAuthError",!0),this.$router.push({path:"/auth/login"})):this.error=t},removeFile:function(e,t,o){var r=this;console.log("remove file"),this.$axios.post("main_app/remove_file",{uploadedFileUrl:this.uploadedFileUrls[e.upload.uuid]}).then(function(t){console.log(t),delete r.uploadedFileUrls[e.upload.uuid]}).catch(function(e){console.log(e)})}},computed:{dropzoneOptions:function(){var e={url:"".concat("http://13.231.227.160:8000","/main_app/upload_file"),thumbnailWidth:150,acceptedFiles:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, .csv",addRemoveLinks:!0};return null!=this.pAcceptedFiles&&(e.acceptedFiles=this.pAcceptedFiles),e}}}),c=(o(180),o(9)),component=Object(c.a)(l,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:e.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-success":e.uploadSucceed,"vdropzone-error":e.fileUploadError,"vdropzone-removed-file":e.removeFile,"vdropzone-sending":e.sendingEvent}},[o("div",{staticClass:"dropzone-custom-content"},[o("h3",{staticClass:"dropzone-custom-title"},[e._v("Drag and drop to upload Order file .xlsx!")]),e._v(" "),o("div",{staticClass:"subtitle"},[e._v("...or click to select a file from your computer")])])])],1)},[],!1,null,null,null);t.a=component.exports},188:function(e,t,o){"use strict";o(51);var r=o(7),n={data:function(){return{clientSecret:"Ai7UOsq_6BQAXjh_YIh8X2eL",pickerApiLoaded:!1,developerKey:"AIzaSyC7y0VTIumqxKnhd64iTQAvnoB-DLGBNAU",clientId:"780265323259-evk1ksoq6lqrmbkus4900dn9udpg3jfk.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.readonly",oauthToken:null}},mounted:function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://apis.google.com/js/api.js"),document.head.appendChild(e)},methods:{driveIconClicked:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Clicked"),e.next=3,gapi.load("auth2",function(){console.log("Auth2 Loaded"),gapi.auth2.authorize({client_id:t.clientId,scope:t.scope,immediate:!1},t.handleAuthResult)});case 3:gapi.load("picker",function(){console.log("Picker Loaded"),t.pickerApiLoaded=!0,t.createPicker()});case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),handleAuthResult:function(e){console.log("Handle Auth result",e),e&&!e.error&&(this.oauthToken=e.access_token,this.createPicker())},createPicker:function(){(console.log("Create Picker",google.picker),this.pickerApiLoaded&&this.oauthToken)&&(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(google.picker.ViewId.DOCS).setOAuthToken(this.oauthToken).setDeveloperKey(this.developerKey).setCallback(this.pickerCallback).build().setVisible(!0)},pickerCallback:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(data){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("PickerCallback",data),"nothing","nothing",data[google.picker.Response.ACTION]===google.picker.Action.PICKED)for(console.log(data.docs),i=0;i<data.docs.length;i++)this.readFile(data.docs[i].id);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),readFile:function(e,t){gapi.load("client",function(){gapi.client.load("drive","v3",function(){var o=gapi.client.drive.files.get({fileId:e,alt:"media"});return o.then(function(e){console.log(e),"function"==typeof t&&t(e.body)},function(e){console.error(e)}),o})})},downloadGDriveFile:function(e){if(e.downloadUrl){var t=gapi.auth.getToken().access_token,o=new XMLHttpRequest;o.open("GET",e.downloadUrl),o.setRequestHeader("Authorization","Bearer "+t),o.onload=function(){var content=o.responseText;do_something_with_file_content(e.title,content)},o.onerror=function(){alert("Download failure.")},o.send()}else alert("Unable to download file.")}}},l=o(9),component=Object(l.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("v-btn",{on:{click:this.driveIconClicked}},[this._v("Connect gdrive")])],1)},[],!1,null,null,null);t.a=component.exports},204:function(e,t,o){"use strict";o.r(t);var r=o(188),n=o(182),l=o(177),c=o(70),d=o.n(c),h={data:function(){return{headers:[{text:"Tracking No",value:"tracking_no"},{text:"Tracking Status",value:"tracking_status"},{text:"Message",value:"tracking_message"},{text:"Order Number",value:"order_number"},{text:"Order Status",value:"order_status"},{text:"Message",value:"order_message"}],rowsPerPageItems:[50,100,200,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],tableResultLoading:!1,addedToDbResults:[],status:{ADDED_SUCCEED:0,ADDED_FAILED:1,UPDATED_SUCCEED:2,UPDATED_FAILED:3},hasError:!1,errorMessage:"",statusList:[],selectedSiteId:void 0}},components:{VueGDrivePicker:r.a,CustomDropZone:n.a,SiteList:l.a},mounted:function(){},methods:{addTracking:function(){var e=this;this.tableResultLoading=!0,this.$axios.post("main_app/add_tracking",{filePaths:this.$refs.customDropzone.uploadedFileUrls,site_id:this.selectedSiteId}).then(function(t){e.tableResultLoading=!1,console.log(t),e.addedToDbResults=t.data.results,e.statusList=t.data.status_list}).catch(function(t){e.tableResultLoading=!1,console.log(t),console.log(t.response),403==t.response.status?(e.$store.commit("auth/setAuthError",!0),e.$store.commit("auth/setAuthErrorMessage",t.response.data.error_message),e.$router.push("/auth/login")):500==t.response.status&&(e.hasError=!0,e.errorMessage=t.response.data.error_message,console.log(t)),e.results=[],e.zip_filepath=void 0})},getShipmentTracingInfo:function(){d.a.post("http://localhost:3000/api/usps/get-shipment-tracking",{trackingNoList:["LT793364217CN","LL420579987CN","LL420579995CN","LT793364265CN","LT793364296CN","LT793364319CN","LL420580044CN","LT793364322CN"]}).then(function(e){console.log(e)}).catch(function(e){console.log(e)}),d.a.post("http://localhost:3000/api/17track/get-shipment-tracking").then(function(e){console.log(e)}).catch(function(e){console.log(e)})},updateSiteId:function(){this.selectedSiteId=this.$refs.sitelist.selectedSiteId,console.log(this.selectedSiteId)}}},v=o(9),component=Object(v.a)(h,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("h1",[e._v("Shipment tracking dashboard")]),e._v(" "),o("SiteList",{ref:"sitelist",on:{updatedSelectedSiteId:e.updateSiteId}}),e._v(" "),o("CustomDropZone",{ref:"customDropzone",attrs:{pAcceptedFiles:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"}}),e._v(" "),o("center",[o("v-btn",{attrs:{color:"primary"},on:{click:e.addTracking}},[e._v("Add & Update Tracking")])],1),e._v(" "),o("center",[this.statusList?o("div",e._l(e.statusList,function(t,r){return o("div",{key:r},[t.hasOwnProperty("error_message")?o("v-alert",{attrs:{type:"error"}},[o("p",[e._v("Filepath: "+e._s(t.filepath))]),e._v(" "),o("p",[e._v("Error Message: "+e._s(t.error_message))])]):o("v-alert",{attrs:{type:"success"}},[o("p",[e._v("Filepath: "+e._s(t.filepath))]),e._v(" "),o("p",[e._v("Message: "+e._s(t.message))])])],1)}),0):e._e(),e._v(" "),this.hasError?o("v-alert",{attrs:{type:"error"}},[e._v("\n            "+e._s(this.errorMessage)+"\n        ")]):e._e(),e._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.addedToDbResults,loading:e.tableResultLoading,"rows-per-page-items":e.rowsPerPageItems},scopedSlots:e._u([{key:"items",fn:function(t){return[o("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.tracking.no))]),e._v(" "),o("td",{staticClass:"text-xs-left"},[t.item.tracking.status==e.status.ADDED_SUCCEED?o("v-chip",{attrs:{close:"",color:"green","text-color":"white"}},[o("v-avatar",[o("v-icon",[e._v("check_circle")])],1),e._v("\n                    Added Succeed\n                ")],1):o("v-chip",{attrs:{close:"",color:"red","text-color":"white"}},[o("v-avatar",[o("v-icon",[e._v("error")])],1),e._v("\n                    Added Failed\n                ")],1)],1),e._v(" "),o("td",[e._v("\n                "+e._s(t.item.tracking.message)+"\n            ")]),e._v(" "),o("td",{staticClass:"text-xs-left"},[e._v(e._s(t.item.order.number))]),e._v(" "),o("td",{staticClass:"text-xs-left"},[t.item.order.status==e.status.ADDED_SUCCEED?o("v-chip",{attrs:{color:"green","text-color":"white"}},[o("v-avatar",[o("v-icon",[e._v("check_circle")])],1),e._v("\n                    Added Succeed\n                ")],1):t.item.order.status==e.status.ADDED_FAILED?o("v-chip",{attrs:{color:"red","text-color":"white"}},[o("v-avatar",[o("v-icon",[e._v("error")])],1),e._v("\n                    Added Failed\n                ")],1):t.item.order.status==e.status.UPDATED_SUCCEED?o("v-chip",{attrs:{color:"primary","text-color":"white"}},[o("v-avatar",[o("v-icon",[e._v("info")])],1),e._v("\n                    Updated Succeed\n                ")],1):o("v-chip",{attrs:{color:"orange","text-color":"white"}},[o("v-avatar",[o("v-icon",[e._v("warning")])],1),e._v("\n                    Updated Failed\n                ")],1)],1),e._v(" "),o("td",[e._v("\n                "+e._s(t.item.order.message)+"\n            ")])]}}])},[o("v-progress-linear",{attrs:{color:"blue",indeterminate:""},scopedSlots:e._u([{key:"progress",fn:function(){},proxy:!0}])})],1)],1)],1)},[],!1,null,null,null);t.default=component.exports}}]);
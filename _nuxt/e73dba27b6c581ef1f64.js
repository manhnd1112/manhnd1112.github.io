(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{176:function(t,e,o){var content=o(181);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(35).default)("3e99b99a",content,!1,{sourceMap:!1})},177:function(t,e,o){"use strict";o(70);var n={data:function(){return{siteList:[],selectedSiteId:void 0}},mounted:function(){this.getSiteList()},created:function(){this.getSiteList()},methods:{getSiteList:function(){var t=this;this.$axios.get("main_app/site_list").then(function(e){console.log(e);for(var i=0;i<e.data.results.length;i++)t.siteList.push({text:e.data.results[i].domain,value:e.data.results[i].site_id});t.selectedSiteId=t.siteList[0].value}).catch(function(e){console.log(e),console.log(e.response),403==e.response.status&&(t.$store.commit("auth/setAuthError",!0),t.$store.commit("auth/setAuthErrorMessage",e.response.data.error_message),t.$router.push("/auth/login"))})}},watch:{selectedSiteId:function(t,e){this.$emit("updatedSelectedSiteId")}}},r=o(9),component=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-select",{attrs:{items:t.siteList,"menu-props":"auto",label:"Site Domain"},model:{value:t.selectedSiteId,callback:function(e){t.selectedSiteId=e},expression:"selectedSiteId"}})],1)},[],!1,null,null,null);e.a=component.exports},178:function(t,e,o){"use strict";o(70);var n=o(71),r={props:["pUrl","pClass","pBtnText","pIsDownloadBtn","pTarget","pColor","pIcon"],data:function(){return{}},methods:{download_link:function(){return this.isDownloadBtn?"".concat(n.a,"/main_app/download/").concat(this.url):this.url}},computed:{url:function(){return this.pUrl},class:function(){return this.pClass},btnText:function(){return this.pBtnText},isDownloadBtn:function(){return this.pIsDownloadBtn},disabled:function(){return null==this.pUrl||""==this.pUrl},target:function(){return this.pTarget},color:function(){return this.pColor},icon:function(){return this.pIcon}}},l=o(9),component=Object(l.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-btn",{class:this.class,attrs:{disabled:this.disabled,color:this.color}},[e("a",{staticClass:"download-a",attrs:{href:this.download_link(),target:this.target}},[this._v(this._s(this.btnText))])])],1)},[],!1,null,null,null);e.a=component.exports},180:function(t,e,o){"use strict";var n=o(176);o.n(n).a},181:function(t,e,o){(t.exports=o(34)(!1)).push([t.i,".dropzone-custom-title{margin-top:0;color:#00b782}.subtitle{color:#314b5f}.download-a{color:#fff!important;text-decoration:none!important}",""])},182:function(t,e,o){"use strict";var n=o(183),r=o.n(n),l=(o(179),jQuery,{props:["pAcceptedFiles"],data:function(){return{uploadedFileUrls:{},hasError:!1,error:void 0}},components:{vueDropzone:r.a},methods:{sendingEvent:function(t,e,o){e.setRequestHeader("Authorization","Bearer ".concat(this.$store.state.auth.token))},reload:function(){var t=this;this.$axios.post("main_app/reload_convert_sku").then(function(e){console.log(e),delete t.uploadedFileUrls[file.upload.uuid]}).catch(function(t){console.log(t)})},uploadSucceed:function(t,e){console.log("uploaed success..."),console.log(t),console.log(e),this.uploadedFileUrls[t.upload.uuid]=e.url},fileUploadError:function(t,e,o){console.log(e),console.log(o),console.log(o.status),403==o.status?(this.$store.commit("auth/setAuthError",!0),this.$router.push({path:"/auth/login"})):this.error=e},removeFile:function(t,e,o){var n=this;console.log("remove file"),this.$axios.post("main_app/remove_file",{uploadedFileUrl:this.uploadedFileUrls[t.upload.uuid]}).then(function(e){console.log(e),delete n.uploadedFileUrls[t.upload.uuid]}).catch(function(t){console.log(t)})}},computed:{dropzoneOptions:function(){var t={url:"".concat("http://13.231.227.160:8000","/main_app/upload_file"),thumbnailWidth:150,acceptedFiles:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, .csv",addRemoveLinks:!0};return null!=this.pAcceptedFiles&&(t.acceptedFiles=this.pAcceptedFiles),t}}}),c=(o(180),o(9)),component=Object(c.a)(l,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("vue-dropzone",{ref:"myVueDropzone",attrs:{id:"dropzone",options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-success":t.uploadSucceed,"vdropzone-error":t.fileUploadError,"vdropzone-removed-file":t.removeFile,"vdropzone-sending":t.sendingEvent}},[o("div",{staticClass:"dropzone-custom-content"},[o("h3",{staticClass:"dropzone-custom-title"},[t._v("Drag and drop to upload Order file .xlsx!")]),t._v(" "),o("div",{staticClass:"subtitle"},[t._v("...or click to select a file from your computer")])])])],1)},[],!1,null,null,null);e.a=component.exports},188:function(t,e,o){"use strict";o(51);var n=o(7),r={data:function(){return{clientSecret:"Ai7UOsq_6BQAXjh_YIh8X2eL",pickerApiLoaded:!1,developerKey:"AIzaSyC7y0VTIumqxKnhd64iTQAvnoB-DLGBNAU",clientId:"780265323259-evk1ksoq6lqrmbkus4900dn9udpg3jfk.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/drive.readonly",oauthToken:null}},mounted:function(){var t=document.createElement("script");t.setAttribute("type","text/javascript"),t.setAttribute("src","https://apis.google.com/js/api.js"),document.head.appendChild(t)},methods:{driveIconClicked:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Clicked"),t.next=3,gapi.load("auth2",function(){console.log("Auth2 Loaded"),gapi.auth2.authorize({client_id:e.clientId,scope:e.scope,immediate:!1},e.handleAuthResult)});case 3:gapi.load("picker",function(){console.log("Picker Loaded"),e.pickerApiLoaded=!0,e.createPicker()});case 4:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),handleAuthResult:function(t){console.log("Handle Auth result",t),t&&!t.error&&(this.oauthToken=t.access_token,this.createPicker())},createPicker:function(){(console.log("Create Picker",google.picker),this.pickerApiLoaded&&this.oauthToken)&&(new google.picker.PickerBuilder).enableFeature(google.picker.Feature.MULTISELECT_ENABLED).addView(google.picker.ViewId.DOCS).setOAuthToken(this.oauthToken).setDeveloperKey(this.developerKey).setCallback(this.pickerCallback).build().setVisible(!0)},pickerCallback:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(data){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("PickerCallback",data),"nothing","nothing",data[google.picker.Response.ACTION]===google.picker.Action.PICKED)for(console.log(data.docs),i=0;i<data.docs.length;i++)this.readFile(data.docs[i].id);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),readFile:function(t,e){gapi.load("client",function(){gapi.client.load("drive","v3",function(){var o=gapi.client.drive.files.get({fileId:t,alt:"media"});return o.then(function(t){console.log(t),"function"==typeof e&&e(t.body)},function(t){console.error(t)}),o})})},downloadGDriveFile:function(t){if(t.downloadUrl){var e=gapi.auth.getToken().access_token,o=new XMLHttpRequest;o.open("GET",t.downloadUrl),o.setRequestHeader("Authorization","Bearer "+e),o.onload=function(){var content=o.responseText;do_something_with_file_content(t.title,content)},o.onerror=function(){alert("Download failure.")},o.send()}else alert("Unable to download file.")}}},l=o(9),component=Object(l.a)(r,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-btn",{on:{click:this.driveIconClicked}},[this._v("Connect gdrive")])],1)},[],!1,null,null,null);e.a=component.exports},192:function(t,e){t.exports={URL_PAT_USPS_TRACK:"https://tools.usps.com/go/TrackConfirmAction?tRef=fullpage&tLc=5&text28777=&tLabels=",URL_PAT_17TRACK:"https://t.17track.net/en#nums="}},201:function(t,e,o){"use strict";o.r(e);o(52),o(72),o(36),o(17),o(73);var n=o(188),r=o(182),l=o(177),c=(o(70),o(178)),d=o(192),h={data:function(){return{headers:[{text:"Order Number",value:"order_number"},{text:"Tracking No",value:"tracking_no"},{text:"Tracking Status",value:"tracking_status"},{text:"From Country",value:"from_country"},{text:"To Country",value:"to_country"},{text:"Tracking Created At",value:"tracking_created_at"},{text:"Admin Edit",value:"admin_edit"},{text:"USPS Track",value:"usps_track"},{text:"17 Track",value:"17track"}],rowsPerPageItems:[50,100,200,{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}],tableResultLoading:!1,orderTrackingList:[],TRACKING_STATUS:{NOT_CREATED:"NOT_CREATED",CAN_NOT_CHECK:"CAN_NOT_CHECK",IN_TRANSIT:"IN_TRANSIT",DELIVERED_TO_COUNTRY:"DELIVERED_TO_COUNTRY",DELIVERED:"DELIVERED"},filters:{tracking_status:[],to_country:[]}}},components:{VueGDrivePicker:n.a,CustomDropZone:r.a,ButtonLink:c.a,SiteList:l.a},mounted:function(){},methods:{getTracking:function(){var t=this;this.tableResultLoading=!0,this.$axios.post("main_app/tracking",{site_id:this.$refs.sitelist.selectedSiteId}).then(function(e){t.tableResultLoading=!1,console.log(e),t.orderTrackingList=e.data.results}).catch(function(e){t.tableResultLoading=!1,console.log(e),console.log(e.response),403==e.response.status&&(t.$store.commit("auth/setAuthError",!0),t.$store.commit("auth/setAuthErrorMessage",e.response.data.error_message),t.$router.push("/auth/login"))})},updateTracking:function(){var t=this;this.tableResultLoading=!0,this.$axios.post("main_app/update_tracking",{site_id:this.$refs.sitelist.selectedSiteId}).then(function(e){t.tableResultLoading=!1,console.log(e),t.orderTrackingList=e.data.results}).catch(function(e){t.tableResultLoading=!1,console.log(e),console.log(e.response),403==e.response.status&&(t.$store.commit("auth/setAuthError",!0),t.$store.commit("auth/setAuthErrorMessage",e.response.data.error_message),t.$router.push("/auth/login"))})},columnValueList:function(t){return this.orderTrackingList.map(function(e){return e[t]})},getUrlUspsTrack:function(t){return"".concat(d.URL_PAT_USPS_TRACK).concat(t)},getUrl17Track:function(t){return"".concat(d.URL_PAT_17TRACK).concat(t)}},computed:{filteredOrderTrackingList:function(){var t=this;return this.orderTrackingList.filter(function(e){return Object.keys(t.filters).every(function(o){return t.filters[o].length<1||t.filters[o].includes(e[o])})})}}},v=o(9),component=Object(v.a)(h,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("h1",[t._v("Shipment tracking dashboard")]),t._v(" "),o("center",[o("v-layout",{attrs:{"justify-center":""}},[o("SiteList",{ref:"sitelist",on:{updatedSelectedSiteId:function(e){return t.getTracking()}}}),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"success"},on:{click:t.updateTracking}},[t._v("Update Tracking")])],1),t._v(" "),o("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.filteredOrderTrackingList,loading:t.tableResultLoading,"rows-per-page-items":t.rowsPerPageItems},scopedSlots:t._u([{key:"headers",fn:function(e){return[o("tr",t._l(e.headers,function(header){return o("th",{key:header.text},[o("td",[t._v(t._s(header.text))])])}),0),t._v(" "),o("tr",{staticClass:"grey lighten-3"},t._l(e.headers,function(header){return o("th",{key:header.text},["order_number"==header.value?o("td",[o("v-icon",[t._v("filter_list")])],1):t._e(),t._v(" "),t.filters.hasOwnProperty(header.value)?o("div",[o("v-select",{attrs:{flat:"","hide-details":"",small:"",multiple:"",clearable:"",items:t.columnValueList(header.value),label:header.text},model:{value:t.filters[header.value],callback:function(e){t.$set(t.filters,header.value,e)},expression:"filters[header.value]"}})],1):t._e()])}),0)]}},{key:"items",fn:function(e){return[o("td",[t._v("\n                    "+t._s(e.item.order_number)+"\n                ")]),t._v(" "),o("td",[t._v("\n                    "+t._s(e.item.tracking_number)+"\n                ")]),t._v(" "),o("td",{staticClass:"text-xs-left"},[e.item.tracking_status==t.TRACKING_STATUS.NOT_CREATED?o("v-chip",{attrs:{color:"orange","text-color":"white"}},[o("v-avatar",[o("v-icon",[t._v("sentiment_very_dissatisfied")])],1),t._v("\n                        Not Created\n                    ")],1):e.item.tracking_status==t.TRACKING_STATUS.CAN_NOT_CHECK?o("v-chip",{attrs:{dark:"",color:"red","text-color":"white"}},[o("v-avatar",[o("v-icon",[t._v("error")])],1),t._v("\n                        Can not check\n                    ")],1):e.item.tracking_status==t.TRACKING_STATUS.IN_TRANSIT?o("v-chip",{attrs:{dark:"",color:"yellow","text-color":"white"}},[o("v-avatar",[o("v-icon",[t._v("rv_hookup")])],1),t._v("\n                        In Transit\n                    ")],1):e.item.tracking_status==t.TRACKING_STATUS.DELIVERED_TO_COUNTRY?o("v-chip",{attrs:{color:"primary","text-color":"white"}},[o("v-avatar",[o("v-icon",[t._v("public")])],1),t._v("\n                        Delivered To Country\n                    ")],1):e.item.tracking_status==t.TRACKING_STATUS.DELIVERED?o("v-chip",{attrs:{color:"green","text-color":"white"}},[o("v-avatar",[o("v-icon",[t._v("sentiment_very_satisfied")])],1),t._v("\n                        Delivered\n                    ")],1):t._e()],1),t._v(" "),o("td",[t._v("\n                    "+t._s(e.item.from_country)+"\n                ")]),t._v(" "),o("td",[t._v("\n                    "+t._s(e.item.to_country)+"\n                ")]),t._v(" "),o("td",[t._v("\n                    "+t._s(e.item.tracking_created_at)+"\n                ")]),t._v(" "),o("td",[o("ButtonLink",{attrs:{pClass:"success",pBtnText:"Edit",pUrl:e.item.admin_url,pTarget:"_blank"}})],1),t._v(" "),o("td",[o("ButtonLink",{attrs:{pClass:"primary",pBtnText:"USPS Track",pUrl:t.getUrlUspsTrack(e.item.tracking_number),pTarget:"_blank"}})],1),t._v(" "),o("td",[o("ButtonLink",{attrs:{pClass:"warning",pBtnText:"17Track",pUrl:t.getUrl17Track(e.item.tracking_number),pTarget:"_blank"}})],1)]}}])},[o("v-progress-linear",{attrs:{color:"blue",indeterminate:""},scopedSlots:t._u([{key:"progress",fn:function(){},proxy:!0}])})],1)],1)],1)},[],!1,null,null,null);e.default=component.exports}}]);